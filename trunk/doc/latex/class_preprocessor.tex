\hypertarget{class_preprocessor}{
\subsection{Preprocessor Class Reference}
\label{class_preprocessor}\index{Preprocessor@{Preprocessor}}
}
\hyperlink{class_preprocessor}{Preprocessor} of the OCR process.  


{\tt \#include $<$Preprocessor.hpp$>$}

Collaboration diagram for Preprocessor:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=400pt]{class_preprocessor__coll__graph}
\end{center}
\end{figure}
\subsubsection*{Public Member Functions}
\begin{CompactItemize}
\item 
\hyperlink{class_preprocessor_da966c8b83e7c3bcd8759549c3cdf688}{Preprocessor} ()
\begin{CompactList}\small\item\em Constructor. \item\end{CompactList}\item 
const unsigned char \& \hyperlink{class_preprocessor_a44dff024a5b29752780bd4aa0d53d81}{optimalThreshold} () const 
\begin{CompactList}\small\item\em Returns the optimal threshold found in the last clip used. \item\end{CompactList}\item 
void \hyperlink{class_preprocessor_1fc44d7d19944f3c3addd3a576c37414}{optimalThreshold} (const unsigned char \&threshold)
\begin{CompactList}\small\item\em Sets the optimal threshold to use in algorithms. \item\end{CompactList}\item 
const unsigned char \& \hyperlink{class_preprocessor_b435116619b7b254d9e788476c012e8a}{backgroundReferenceGrayLevel} () const 
\begin{CompactList}\small\item\em Returns the background reference gray level in the last clip used. \item\end{CompactList}\item 
const float \& \hyperlink{class_preprocessor_ff8eee937760e42c0c2bea307849ada1}{noiseRemovalTime} () const 
\begin{CompactList}\small\item\em Returns the elapsed time while applying the 'isolated noise removal' algorithm. \item\end{CompactList}\item 
const float \& \hyperlink{class_preprocessor_72aa2eb5f3a7e7ee0d3ca27ddd6bfc5e}{optimalThresholdComputingTime} () const 
\begin{CompactList}\small\item\em Returns the elapsed time while founding the optimal threshold within the clip. \item\end{CompactList}\item 
const float \& \hyperlink{class_preprocessor_001ec84b94a5d92a2bce6b854b4d3e7d}{backgroundReferenceGrayLevelFindingTime} () const 
\begin{CompactList}\small\item\em Returns the elapsed time while computing the background reference gray level within the clip. \item\end{CompactList}\item 
const unsigned char \& \hyperlink{class_preprocessor_ac2f414d6f4f917419f33f6067eb8634}{computeOptimalThreshold} (const \hyperlink{class_clip}{Clip} \&clip)
\begin{CompactList}\small\item\em Computes the optimal threshold value in a clip following the Sonka's technique. \item\end{CompactList}\item 
const unsigned char \& \hyperlink{class_preprocessor_a941f81382bd8e235e4dd12481342be4}{findBackgroundReferenceGrayLevel} (const \hyperlink{class_clip}{Clip} \&clip, const unsigned int \&referenceGrayLevelNeighbours=2)
\begin{CompactList}\small\item\em Computes the background reference gray level value within a clip. \item\end{CompactList}\item 
void \hyperlink{class_preprocessor_a3e047486a0a80f2103f51d7141e41c5}{removeIsolatedNoise} (\hyperlink{class_clip}{Clip} \&clip, const unsigned int \&isolationCoefficient=0)
\begin{CompactList}\small\item\em Applies the 'isolated noise removal' algorithm. \item\end{CompactList}\end{CompactItemize}
\subsubsection*{Private Attributes}
\begin{CompactItemize}
\item 
\hypertarget{class_preprocessor_865b1e28dd9535b96f70727a550104fe}{
unsigned char \hyperlink{class_preprocessor_865b1e28dd9535b96f70727a550104fe}{optimalThreshold\_\-}}
\label{class_preprocessor_865b1e28dd9535b96f70727a550104fe}

\begin{CompactList}\small\item\em Optimal threshold value within the clip. \item\end{CompactList}\item 
\hypertarget{class_preprocessor_2c9e44ff6522b2ce35d6bc6161ad2680}{
unsigned char \hyperlink{class_preprocessor_2c9e44ff6522b2ce35d6bc6161ad2680}{backgroundReferenceGrayLevel\_\-}}
\label{class_preprocessor_2c9e44ff6522b2ce35d6bc6161ad2680}

\begin{CompactList}\small\item\em Background reference gray level. \item\end{CompactList}\item 
\hypertarget{class_preprocessor_d6e3bee674df10921f29612bc5bc6978}{
float \hyperlink{class_preprocessor_d6e3bee674df10921f29612bc5bc6978}{noiseRemovalTime\_\-}}
\label{class_preprocessor_d6e3bee674df10921f29612bc5bc6978}

\begin{CompactList}\small\item\em Elapsed time when applying the 'isolated noise removal' algorithm. \item\end{CompactList}\item 
\hypertarget{class_preprocessor_d52352691de7d8f0738b67e93a5898fc}{
float \hyperlink{class_preprocessor_d52352691de7d8f0738b67e93a5898fc}{optimalThresholdComputingTime\_\-}}
\label{class_preprocessor_d52352691de7d8f0738b67e93a5898fc}

\begin{CompactList}\small\item\em Elapsed time when converting the image to a grayscale colorspace. \item\end{CompactList}\item 
\hypertarget{class_preprocessor_98ea95388e043eef5460beaf2e3aaaed}{
float \hyperlink{class_preprocessor_98ea95388e043eef5460beaf2e3aaaed}{backgroundReferenceGrayLevelFindingTime\_\-}}
\label{class_preprocessor_98ea95388e043eef5460beaf2e3aaaed}

\begin{CompactList}\small\item\em Elapsed time when computing the background gray level. \item\end{CompactList}\end{CompactItemize}


\subsubsection{Detailed Description}
\hyperlink{class_preprocessor}{Preprocessor} of the OCR process. 

This class encapsulates all the algorithms related to preprocessing stage of the OCR process. Its task is to enhance the image quality by applying some techniques of image processing theory and compute a number of parameters such as the optimal thresolding value or the background reference gray level.

\begin{Desc}
\item[See also:]\hyperlink{class_clip}{Clip}\end{Desc}
\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-11 \end{Desc}


\subsubsection{Constructor \& Destructor Documentation}
\hypertarget{class_preprocessor_da966c8b83e7c3bcd8759549c3cdf688}{
\index{Preprocessor@{Preprocessor}!Preprocessor@{Preprocessor}}
\index{Preprocessor@{Preprocessor}!Preprocessor@{Preprocessor}}
\paragraph[{Preprocessor}]{\setlength{\rightskip}{0pt plus 5cm}Preprocessor::Preprocessor ()}\hfill}
\label{class_preprocessor_da966c8b83e7c3bcd8759549c3cdf688}


Constructor. 

\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-08 \end{Desc}


\subsubsection{Member Function Documentation}
\hypertarget{class_preprocessor_b435116619b7b254d9e788476c012e8a}{
\index{Preprocessor@{Preprocessor}!backgroundReferenceGrayLevel@{backgroundReferenceGrayLevel}}
\index{backgroundReferenceGrayLevel@{backgroundReferenceGrayLevel}!Preprocessor@{Preprocessor}}
\paragraph[{backgroundReferenceGrayLevel}]{\setlength{\rightskip}{0pt plus 5cm}const unsigned char \& Preprocessor::backgroundReferenceGrayLevel () const}\hfill}
\label{class_preprocessor_b435116619b7b254d9e788476c012e8a}


Returns the background reference gray level in the last clip used. 

\begin{Desc}
\item[Returns:]Reference background gray level in the last clip used\end{Desc}
\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-13 \end{Desc}


Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=234pt]{class_preprocessor_b435116619b7b254d9e788476c012e8a_icgraph}
\end{center}
\end{figure}
\hypertarget{class_preprocessor_001ec84b94a5d92a2bce6b854b4d3e7d}{
\index{Preprocessor@{Preprocessor}!backgroundReferenceGrayLevelFindingTime@{backgroundReferenceGrayLevelFindingTime}}
\index{backgroundReferenceGrayLevelFindingTime@{backgroundReferenceGrayLevelFindingTime}!Preprocessor@{Preprocessor}}
\paragraph[{backgroundReferenceGrayLevelFindingTime}]{\setlength{\rightskip}{0pt plus 5cm}const float \& Preprocessor::backgroundReferenceGrayLevelFindingTime () const}\hfill}
\label{class_preprocessor_001ec84b94a5d92a2bce6b854b4d3e7d}


Returns the elapsed time while computing the background reference gray level within the clip. 

\begin{Desc}
\item[Returns:]Elapsed time while computing the background reference gray level\end{Desc}
\begin{Desc}
\item[See also:]\hyperlink{class_preprocessor_a941f81382bd8e235e4dd12481342be4}{findBackgroundReferenceGrayLevel()}\end{Desc}
\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-13 \end{Desc}


Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=264pt]{class_preprocessor_001ec84b94a5d92a2bce6b854b4d3e7d_icgraph}
\end{center}
\end{figure}
\hypertarget{class_preprocessor_ac2f414d6f4f917419f33f6067eb8634}{
\index{Preprocessor@{Preprocessor}!computeOptimalThreshold@{computeOptimalThreshold}}
\index{computeOptimalThreshold@{computeOptimalThreshold}!Preprocessor@{Preprocessor}}
\paragraph[{computeOptimalThreshold}]{\setlength{\rightskip}{0pt plus 5cm}const unsigned char \& Preprocessor::computeOptimalThreshold (const {\bf Clip} \& {\em clip})}\hfill}
\label{class_preprocessor_ac2f414d6f4f917419f33f6067eb8634}


Computes the optimal threshold value in a clip following the Sonka's technique. 

\begin{Desc}
\item[Precondition:]You MUST call \hyperlink{class_preprocessor_a941f81382bd8e235e4dd12481342be4}{findBackgroundReferenceGrayLevel()} method before calling this one, since it sets internal attributes.\end{Desc}
\begin{Desc}
\item[Postcondition:]The \hyperlink{class_preprocessor_d52352691de7d8f0738b67e93a5898fc}{optimalThresholdComputingTime\_\-} member is modified. 

The \hyperlink{class_preprocessor_865b1e28dd9535b96f70727a550104fe}{optimalThreshold\_\-} member is initialized to the threshold found\end{Desc}
\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em clip}]The clip where applying the algorithm over\end{description}
\end{Desc}
\begin{Desc}
\item[See also:]\hyperlink{class_clip}{Clip}\end{Desc}
\begin{Desc}
\item[Returns:]The optimal threshold of the clip\end{Desc}
\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-20\end{Desc}
The strategy proposed by M. Sonka, V. Hlavac and R. Boyle in \char`\"{}Image Processing, Analysis and Machine Vision\char`\"{} (Thomson Learning, 2008) is to find a mean value between the mean value of background's gray level and the mean value of objects' gray level, starting from an initial threshold value that is given by the member backgroundReferenceGrayLevel\_\-. 

Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=189pt]{class_preprocessor_ac2f414d6f4f917419f33f6067eb8634_cgraph}
\end{center}
\end{figure}


Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=220pt]{class_preprocessor_ac2f414d6f4f917419f33f6067eb8634_icgraph}
\end{center}
\end{figure}
\hypertarget{class_preprocessor_a941f81382bd8e235e4dd12481342be4}{
\index{Preprocessor@{Preprocessor}!findBackgroundReferenceGrayLevel@{findBackgroundReferenceGrayLevel}}
\index{findBackgroundReferenceGrayLevel@{findBackgroundReferenceGrayLevel}!Preprocessor@{Preprocessor}}
\paragraph[{findBackgroundReferenceGrayLevel}]{\setlength{\rightskip}{0pt plus 5cm}const unsigned char \& Preprocessor::findBackgroundReferenceGrayLevel (const {\bf Clip} \& {\em clip}, \/  const unsigned int \& {\em referenceGrayLevelNeighbours} = {\tt 2})}\hfill}
\label{class_preprocessor_a941f81382bd8e235e4dd12481342be4}


Computes the background reference gray level value within a clip. 

\begin{Desc}
\item[Postcondition:]The \hyperlink{class_preprocessor_98ea95388e043eef5460beaf2e3aaaed}{backgroundReferenceGrayLevelFindingTime\_\-} member is modified.\end{Desc}
\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em clip}]The clip where applying the algorithm over \item[{\em referenceGrayLevelNeighbours}]Number of neighbours of the more frequent gray level to explore on each direction\end{description}
\end{Desc}
\begin{Desc}
\item[See also:]\hyperlink{class_clip}{Clip}\end{Desc}
\begin{Desc}
\item[Returns:]The reference gray level of the background\end{Desc}
\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-13\end{Desc}
To find the reference gray level of the background it is assumed that there are more pixels belonging to the background than belonging to the foreground. Then, we search the more frequent gray level and its neighbours. Finally, we compute a gray level weighted mean using all those values.

\begin{Desc}
\item[\hyperlink{bug__bug000001}{Bug}]There are cases where the reference gray level found does not match with the real background gray level, because the assumption made about the background's number of pixels is false. An alternative may be to find two reference gray levels; if the classification process does not work, everything must be undone and start again with the second reference gray level. \end{Desc}


Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=213pt]{class_preprocessor_a941f81382bd8e235e4dd12481342be4_cgraph}
\end{center}
\end{figure}


Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{class_preprocessor_a941f81382bd8e235e4dd12481342be4_icgraph}
\end{center}
\end{figure}
\hypertarget{class_preprocessor_ff8eee937760e42c0c2bea307849ada1}{
\index{Preprocessor@{Preprocessor}!noiseRemovalTime@{noiseRemovalTime}}
\index{noiseRemovalTime@{noiseRemovalTime}!Preprocessor@{Preprocessor}}
\paragraph[{noiseRemovalTime}]{\setlength{\rightskip}{0pt plus 5cm}const float \& Preprocessor::noiseRemovalTime () const}\hfill}
\label{class_preprocessor_ff8eee937760e42c0c2bea307849ada1}


Returns the elapsed time while applying the 'isolated noise removal' algorithm. 

\begin{Desc}
\item[Returns:]Elapsed time when applying the 'isolated noise removal' algorithm\end{Desc}
\begin{Desc}
\item[See also:]\hyperlink{class_preprocessor_a3e047486a0a80f2103f51d7141e41c5}{removeIsolatedNoise()}\end{Desc}
\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-13 \end{Desc}


Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{class_preprocessor_ff8eee937760e42c0c2bea307849ada1_icgraph}
\end{center}
\end{figure}
\hypertarget{class_preprocessor_1fc44d7d19944f3c3addd3a576c37414}{
\index{Preprocessor@{Preprocessor}!optimalThreshold@{optimalThreshold}}
\index{optimalThreshold@{optimalThreshold}!Preprocessor@{Preprocessor}}
\paragraph[{optimalThreshold}]{\setlength{\rightskip}{0pt plus 5cm}void Preprocessor::optimalThreshold (const unsigned char \& {\em threshold})}\hfill}
\label{class_preprocessor_1fc44d7d19944f3c3addd3a576c37414}


Sets the optimal threshold to use in algorithms. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em threshold}]Value between 0 and 255 that stablishes the optimal threshold of a clip.\end{description}
\end{Desc}
\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-08 \end{Desc}
\hypertarget{class_preprocessor_a44dff024a5b29752780bd4aa0d53d81}{
\index{Preprocessor@{Preprocessor}!optimalThreshold@{optimalThreshold}}
\index{optimalThreshold@{optimalThreshold}!Preprocessor@{Preprocessor}}
\paragraph[{optimalThreshold}]{\setlength{\rightskip}{0pt plus 5cm}const unsigned char \& Preprocessor::optimalThreshold () const}\hfill}
\label{class_preprocessor_a44dff024a5b29752780bd4aa0d53d81}


Returns the optimal threshold found in the last clip used. 

\begin{Desc}
\item[Returns:]Optimal threshold computed from the last clip used.\end{Desc}
\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-13 \end{Desc}


Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=196pt]{class_preprocessor_a44dff024a5b29752780bd4aa0d53d81_icgraph}
\end{center}
\end{figure}
\hypertarget{class_preprocessor_72aa2eb5f3a7e7ee0d3ca27ddd6bfc5e}{
\index{Preprocessor@{Preprocessor}!optimalThresholdComputingTime@{optimalThresholdComputingTime}}
\index{optimalThresholdComputingTime@{optimalThresholdComputingTime}!Preprocessor@{Preprocessor}}
\paragraph[{optimalThresholdComputingTime}]{\setlength{\rightskip}{0pt plus 5cm}const float \& Preprocessor::optimalThresholdComputingTime () const}\hfill}
\label{class_preprocessor_72aa2eb5f3a7e7ee0d3ca27ddd6bfc5e}


Returns the elapsed time while founding the optimal threshold within the clip. 

\begin{Desc}
\item[Returns:]Elapsed time while founding the optimal threshold within the clip\end{Desc}
\begin{Desc}
\item[See also:]\hyperlink{class_preprocessor_ac2f414d6f4f917419f33f6067eb8634}{computeOptimalThreshold()}\end{Desc}
\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-13 \end{Desc}


Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=236pt]{class_preprocessor_72aa2eb5f3a7e7ee0d3ca27ddd6bfc5e_icgraph}
\end{center}
\end{figure}
\hypertarget{class_preprocessor_a3e047486a0a80f2103f51d7141e41c5}{
\index{Preprocessor@{Preprocessor}!removeIsolatedNoise@{removeIsolatedNoise}}
\index{removeIsolatedNoise@{removeIsolatedNoise}!Preprocessor@{Preprocessor}}
\paragraph[{removeIsolatedNoise}]{\setlength{\rightskip}{0pt plus 5cm}void Preprocessor::removeIsolatedNoise ({\bf Clip} \& {\em clip}, \/  const unsigned int \& {\em isolationCoefficient} = {\tt 0})}\hfill}
\label{class_preprocessor_a3e047486a0a80f2103f51d7141e41c5}


Applies the 'isolated noise removal' algorithm. 

\begin{Desc}
\item[Precondition:]You MUST call \hyperlink{class_preprocessor_ac2f414d6f4f917419f33f6067eb8634}{computeOptimalThreshold()} and \hyperlink{class_preprocessor_a941f81382bd8e235e4dd12481342be4}{findBackgroundReferenceGrayLevel()} methods before calling this one, since they set internal attributes.\end{Desc}
\begin{Desc}
\item[Postcondition:]The clip may be modified if any noise is found.\end{Desc}
\begin{Desc}
\item[Parameters:]
\begin{description}
\item[\mbox{$\leftrightarrow$} {\em clip}]The clip where applying the algorithm over \item[{\em isolationCoefficient}]The maximum noisy neighbours for a pixel to consider it as isolated\end{description}
\end{Desc}
\begin{Desc}
\item[See also:]\hyperlink{class_clip}{Clip}\end{Desc}
\begin{Desc}
\item[Author:]Eliezer Talón (\href{mailto:elitalon@gmail.com}{\tt elitalon@gmail.com}) \end{Desc}
\begin{Desc}
\item[Date:]2008-10-11\end{Desc}
The 'isolated noise removal' algorithm tries to eliminate isolated noisy pixels from an clip. The isolationCoefficient parameter defines how much isolated should be a noisy pixel to be removed. That means a noisy pixel will be removed whenever it has as much neighbours whose gray level is over a threshold value as isolationCoefficient. 

Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=176pt]{class_preprocessor_a3e047486a0a80f2103f51d7141e41c5_cgraph}
\end{center}
\end{figure}


Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=207pt]{class_preprocessor_a3e047486a0a80f2103f51d7141e41c5_icgraph}
\end{center}
\end{figure}
