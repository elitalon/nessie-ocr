<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Nessie, reconocedor óptico de texto en recortes de prensa escrita: Preprocessor Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Preprocessor Class Reference</h1><!-- doxytag: class="Preprocessor" --><code>#include &lt;<a class="el" href="_preprocessor_8hpp-source.html">Preprocessor.hpp</a>&gt;</code>
<p>
<div class="dynheader">
Collaboration diagram for Preprocessor:</div>
<div class="dynsection">
<p><center><img src="class_preprocessor__coll__graph.png" border="0" usemap="#_preprocessor__coll__map" alt="Collaboration graph"></center>
</div>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="class_preprocessor.html" title="Preprocessor of the OCR process.">Preprocessor</a> of the OCR process. 
<p>
This class encapsulates all the methods related to preprocessing stage. Its task is to enhance the image quality by applying some techniques of image preprocessing theory and compute a number of parameters such as the optimal thresolding value or the background reference gray level<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_clip.html" title="Press clip where the recognizer has to extract the text from.">Clip</a></dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-11 </dd></dl>

<p>Definition at line <a class="el" href="_preprocessor_8hpp-source.html#l00025">25</a> of file <a class="el" href="_preprocessor_8hpp-source.html">Preprocessor.hpp</a>.</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#da966c8b83e7c3bcd8759549c3cdf688">Preprocessor</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#da966c8b83e7c3bcd8759549c3cdf688"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const unsigned char &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#a44dff024a5b29752780bd4aa0d53d81">optimalThreshold</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the optimal threshold found in the last clip used.  <a href="#a44dff024a5b29752780bd4aa0d53d81"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#1fc44d7d19944f3c3addd3a576c37414">optimalThreshold</a> (const unsigned char &amp;threshold)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the optimal threshold to use in algorithms.  <a href="#1fc44d7d19944f3c3addd3a576c37414"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const unsigned char &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#b435116619b7b254d9e788476c012e8a">backgroundReferenceGrayLevel</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the background reference gray level in the last clip used.  <a href="#b435116619b7b254d9e788476c012e8a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const double &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#e54e2a5703a0f39ddff8e9936f9a2275">noiseRemovalTime</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the elapsed time while applying the 'isolated noise removal' algorithm.  <a href="#e54e2a5703a0f39ddff8e9936f9a2275"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const double &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#2bd63a7e7aba300ddf79b2c956e943e9">optimalThresholdComputingTime</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the elapsed time while founding the optimal threshold within the clip.  <a href="#2bd63a7e7aba300ddf79b2c956e943e9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const double &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#2cb04f2116b4afc783ff070026bc1297">backgroundReferenceGrayLevelFindingTime</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the elapsed time while computing the background reference gray level within the clip.  <a href="#2cb04f2116b4afc783ff070026bc1297"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const unsigned char &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#aaeb94a3b52b835bc26efebb40be25bc">computeOptimalThreshold</a> (const <a class="el" href="class_clip.html">Clip</a> &amp;clip, const unsigned int &amp;technique=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Computes the optimal threshold value within a clip.  <a href="#aaeb94a3b52b835bc26efebb40be25bc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const unsigned char &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#a941f81382bd8e235e4dd12481342be4">findBackgroundReferenceGrayLevel</a> (const <a class="el" href="class_clip.html">Clip</a> &amp;clip, const unsigned int &amp;referenceGrayLevelNeighbours=2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Computes the background reference gray level value within a clip.  <a href="#a941f81382bd8e235e4dd12481342be4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#a3e047486a0a80f2103f51d7141e41c5">removeIsolatedNoise</a> (<a class="el" href="class_clip.html">Clip</a> &amp;clip, const unsigned int &amp;isolationCoefficient=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Applies the 'isolated noise removal' algorithm.  <a href="#a3e047486a0a80f2103f51d7141e41c5"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#3d4fa7e4721c62997beb93a41d729c99">computeSonkaOptimalThreshold</a> (const <a class="el" href="class_clip.html">Clip</a> &amp;clip)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of optimal threshold computing following the Sonka's technique.  <a href="#3d4fa7e4721c62997beb93a41d729c99"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#faa4368f471a3e5d0cb46865a2a1ccb7">computeOtsuOptimalThreshold</a> (const <a class="el" href="class_clip.html">Clip</a> &amp;clip)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implementation of optimal threshold computing following the Otsu's technique.  <a href="#faa4368f471a3e5d0cb46865a2a1ccb7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="865b1e28dd9535b96f70727a550104fe"></a><!-- doxytag: member="Preprocessor::optimalThreshold_" ref="865b1e28dd9535b96f70727a550104fe" args="" -->
unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#865b1e28dd9535b96f70727a550104fe">optimalThreshold_</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Optimal threshold value within the clip. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2c9e44ff6522b2ce35d6bc6161ad2680"></a><!-- doxytag: member="Preprocessor::backgroundReferenceGrayLevel_" ref="2c9e44ff6522b2ce35d6bc6161ad2680" args="" -->
unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#2c9e44ff6522b2ce35d6bc6161ad2680">backgroundReferenceGrayLevel_</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Background reference gray level. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="386a5118bd982b2377c1fc5d67ebb7ac"></a><!-- doxytag: member="Preprocessor::noiseRemovalTime_" ref="386a5118bd982b2377c1fc5d67ebb7ac" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#386a5118bd982b2377c1fc5d67ebb7ac">noiseRemovalTime_</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Elapsed time when applying the 'isolated noise removal' algorithm. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d606fe1f0be7f7be60583f59278e2df6"></a><!-- doxytag: member="Preprocessor::optimalThresholdComputingTime_" ref="d606fe1f0be7f7be60583f59278e2df6" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#d606fe1f0be7f7be60583f59278e2df6">optimalThresholdComputingTime_</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Elapsed time when converting the image to a grayscale colorspace. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="140ea3fa7bbd4e8fef54912d65c4e926"></a><!-- doxytag: member="Preprocessor::backgroundReferenceGrayLevelFindingTime_" ref="140ea3fa7bbd4e8fef54912d65c4e926" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_preprocessor.html#140ea3fa7bbd4e8fef54912d65c4e926">backgroundReferenceGrayLevelFindingTime_</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Elapsed time when computing the background gray level. <br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="da966c8b83e7c3bcd8759549c3cdf688"></a><!-- doxytag: member="Preprocessor::Preprocessor" ref="da966c8b83e7c3bcd8759549c3cdf688" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Preprocessor::Preprocessor           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-08</dd></dl>
Initializes a <a class="el" href="class_preprocessor.html" title="Preprocessor of the OCR process.">Preprocessor</a> object 
<p>Definition at line <a class="el" href="_preprocessor_8cpp-source.html#l00020">20</a> of file <a class="el" href="_preprocessor_8cpp-source.html">Preprocessor.cpp</a>.</p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a44dff024a5b29752780bd4aa0d53d81"></a><!-- doxytag: member="Preprocessor::optimalThreshold" ref="a44dff024a5b29752780bd4aa0d53d81" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char &amp; Preprocessor::optimalThreshold           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the optimal threshold found in the last clip used. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Current optimal threshold computed from the last clip used</dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-13 </dd></dl>

<p>Definition at line <a class="el" href="_preprocessor_8hpp-source.html#l00233">233</a> of file <a class="el" href="_preprocessor_8hpp-source.html">Preprocessor.hpp</a>.</p>

<p>Referenced by <a class="el" href="_recognizer_8cpp-source.html#l00086">Recognizer::obtainText()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1fc44d7d19944f3c3addd3a576c37414"></a><!-- doxytag: member="Preprocessor::optimalThreshold" ref="1fc44d7d19944f3c3addd3a576c37414" args="(const unsigned char &amp;threshold)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Preprocessor::optimalThreshold           </td>
          <td>(</td>
          <td class="paramtype">const unsigned char &amp;&nbsp;</td>
          <td class="paramname"> <em>threshold</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the optimal threshold to use in algorithms. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>threshold</em>&nbsp;</td><td>A value between 0 and 255 that stablishes the optimal threshold of a clip</td></tr>
  </table>
</dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-08 </dd></dl>

<p>Definition at line <a class="el" href="_preprocessor_8hpp-source.html#l00242">242</a> of file <a class="el" href="_preprocessor_8hpp-source.html">Preprocessor.hpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="b435116619b7b254d9e788476c012e8a"></a><!-- doxytag: member="Preprocessor::backgroundReferenceGrayLevel" ref="b435116619b7b254d9e788476c012e8a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char &amp; Preprocessor::backgroundReferenceGrayLevel           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the background reference gray level in the last clip used. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Reference background gray level in the last clip used</dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-13 </dd></dl>

<p>Definition at line <a class="el" href="_preprocessor_8hpp-source.html#l00251">251</a> of file <a class="el" href="_preprocessor_8hpp-source.html">Preprocessor.hpp</a>.</p>

<p>Referenced by <a class="el" href="_recognizer_8cpp-source.html#l00086">Recognizer::obtainText()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e54e2a5703a0f39ddff8e9936f9a2275"></a><!-- doxytag: member="Preprocessor::noiseRemovalTime" ref="e54e2a5703a0f39ddff8e9936f9a2275" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double &amp; Preprocessor::noiseRemovalTime           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the elapsed time while applying the 'isolated noise removal' algorithm. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Elapsed time when applying the 'isolated noise removal' algorithm</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_preprocessor.html#a3e047486a0a80f2103f51d7141e41c5" title="Applies the &#39;isolated noise removal&#39; algorithm.">removeIsolatedNoise()</a></dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-13 </dd></dl>

<p>Definition at line <a class="el" href="_preprocessor_8hpp-source.html#l00260">260</a> of file <a class="el" href="_preprocessor_8hpp-source.html">Preprocessor.hpp</a>.</p>

<p>Referenced by <a class="el" href="_recognizer_8cpp-source.html#l00086">Recognizer::obtainText()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2bd63a7e7aba300ddf79b2c956e943e9"></a><!-- doxytag: member="Preprocessor::optimalThresholdComputingTime" ref="2bd63a7e7aba300ddf79b2c956e943e9" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double &amp; Preprocessor::optimalThresholdComputingTime           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the elapsed time while founding the optimal threshold within the clip. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Elapsed time while founding the optimal threshold within the clip</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_preprocessor.html#aaeb94a3b52b835bc26efebb40be25bc" title="Computes the optimal threshold value within a clip.">computeOptimalThreshold()</a></dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-13 </dd></dl>

<p>Definition at line <a class="el" href="_preprocessor_8hpp-source.html#l00269">269</a> of file <a class="el" href="_preprocessor_8hpp-source.html">Preprocessor.hpp</a>.</p>

<p>Referenced by <a class="el" href="_recognizer_8cpp-source.html#l00086">Recognizer::obtainText()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2cb04f2116b4afc783ff070026bc1297"></a><!-- doxytag: member="Preprocessor::backgroundReferenceGrayLevelFindingTime" ref="2cb04f2116b4afc783ff070026bc1297" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double &amp; Preprocessor::backgroundReferenceGrayLevelFindingTime           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the elapsed time while computing the background reference gray level within the clip. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Elapsed time while computing the background reference gray level</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_preprocessor.html#a941f81382bd8e235e4dd12481342be4" title="Computes the background reference gray level value within a clip.">findBackgroundReferenceGrayLevel()</a></dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-13 </dd></dl>

<p>Definition at line <a class="el" href="_preprocessor_8hpp-source.html#l00278">278</a> of file <a class="el" href="_preprocessor_8hpp-source.html">Preprocessor.hpp</a>.</p>

<p>Referenced by <a class="el" href="_recognizer_8cpp-source.html#l00086">Recognizer::obtainText()</a>.</p>

</div>
</div><p>
<a class="anchor" name="aaeb94a3b52b835bc26efebb40be25bc"></a><!-- doxytag: member="Preprocessor::computeOptimalThreshold" ref="aaeb94a3b52b835bc26efebb40be25bc" args="(const Clip &amp;clip, const unsigned int &amp;technique=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char &amp; Preprocessor::computeOptimalThreshold           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_clip.html">Clip</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>clip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int &amp;&nbsp;</td>
          <td class="paramname"> <em>technique</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Computes the optimal threshold value within a clip. 
<p>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>You MUST call <a class="el" href="class_preprocessor.html#a941f81382bd8e235e4dd12481342be4" title="Computes the background reference gray level value within a clip.">findBackgroundReferenceGrayLevel()</a> method before calling this one, since it sets internal attributes. </dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>The member <a class="el" href="class_preprocessor.html#d606fe1f0be7f7be60583f59278e2df6" title="Elapsed time when converting the image to a grayscale colorspace.">optimalThresholdComputingTime_</a> is modified.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>clip</em>&nbsp;</td><td>The clip where applying the algorithm over </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>technique</em>&nbsp;</td><td>An integer that tells the technique that must be used: 0 for Sonka's method or 1 for Otsu's method.</td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_clip.html" title="Press clip where the recognizer has to extract the text from.">Clip</a>, <a class="el" href="class_preprocessor.html#3d4fa7e4721c62997beb93a41d729c99" title="Implementation of optimal threshold computing following the Sonka&#39;s technique...">computeSonkaOptimalThreshold()</a>, <a class="el" href="class_preprocessor.html#faa4368f471a3e5d0cb46865a2a1ccb7" title="Implementation of optimal threshold computing following the Otsu&#39;s technique...">computeOtsuOptimalThreshold()</a></dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The optimal threshold of the clip</dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-13</dd></dl>
To compute the optimal threshold we may follow two different strategies. The Sonka's method is faster but sometimes less accurate, while Otsu's method is more accurate but slower and sometimes does not perform well if there are more than three representative gray levels. Unless you are testing both algorithms or have specific domain knowledge we strongly recommend the Sonka's technique. 
<p>Definition at line <a class="el" href="_preprocessor_8cpp-source.html#l00033">33</a> of file <a class="el" href="_preprocessor_8cpp-source.html">Preprocessor.cpp</a>.</p>

<p>Referenced by <a class="el" href="_recognizer_8cpp-source.html#l00086">Recognizer::obtainText()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a941f81382bd8e235e4dd12481342be4"></a><!-- doxytag: member="Preprocessor::findBackgroundReferenceGrayLevel" ref="a941f81382bd8e235e4dd12481342be4" args="(const Clip &amp;clip, const unsigned int &amp;referenceGrayLevelNeighbours=2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char &amp; Preprocessor::findBackgroundReferenceGrayLevel           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_clip.html">Clip</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>clip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int &amp;&nbsp;</td>
          <td class="paramname"> <em>referenceGrayLevelNeighbours</em> = <code>2</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Computes the background reference gray level value within a clip. 
<p>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>The member <a class="el" href="class_preprocessor.html#140ea3fa7bbd4e8fef54912d65c4e926" title="Elapsed time when computing the background gray level.">backgroundReferenceGrayLevelFindingTime_</a> is modified.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>clip</em>&nbsp;</td><td>The clip where applying the algorithm over </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>referenceGrayLevelNeighbours</em>&nbsp;</td><td>Number of neighbours of the more frequent gray level to explore on each direction</td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_clip.html" title="Press clip where the recognizer has to extract the text from.">Clip</a></dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The reference gray level of the background</dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-13</dd></dl>
To find the reference gray level of the background it is assumed that there are more pixels belonging to the background than belonging to the foreground. Then, we search the more frequent gray level and its neighbours. Finally, we compute a gray level weighted mean using all those values.<p>
<dl compact><dt><b><a class="el" href="bug.html#_bug000001">Bug:</a></b></dt><dd>There are cases where the reference gray level found does not match with the real background gray level, because the assumption made about the background's number of pixels is false. An alternative may be to find two reference gray levels; if the classification process does not work, everything must be undone and start again with the second reference gray level. </dd></dl>

<p>Definition at line <a class="el" href="_preprocessor_8cpp-source.html#l00053">53</a> of file <a class="el" href="_preprocessor_8cpp-source.html">Preprocessor.cpp</a>.</p>

<p>Referenced by <a class="el" href="_recognizer_8cpp-source.html#l00086">Recognizer::obtainText()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a3e047486a0a80f2103f51d7141e41c5"></a><!-- doxytag: member="Preprocessor::removeIsolatedNoise" ref="a3e047486a0a80f2103f51d7141e41c5" args="(Clip &amp;clip, const unsigned int &amp;isolationCoefficient=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Preprocessor::removeIsolatedNoise           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_clip.html">Clip</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>clip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int &amp;&nbsp;</td>
          <td class="paramname"> <em>isolationCoefficient</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Applies the 'isolated noise removal' algorithm. 
<p>
<dl class="pre" compact><dt><b>Precondition:</b></dt><dd>You MUST call <a class="el" href="class_preprocessor.html#aaeb94a3b52b835bc26efebb40be25bc" title="Computes the optimal threshold value within a clip.">computeOptimalThreshold()</a> and <a class="el" href="class_preprocessor.html#a941f81382bd8e235e4dd12481342be4" title="Computes the background reference gray level value within a clip.">findBackgroundReferenceGrayLevel()</a> methods before calling this one, since they set internal attributes.</dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>The clip may be modified if any noise is found.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>clip</em>&nbsp;</td><td>The clip where applying the algorithm over </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>isolationCoefficient</em>&nbsp;</td><td>The maximum noisy neighbours for a pixel to consider it as isolated</td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_clip.html" title="Press clip where the recognizer has to extract the text from.">Clip</a></dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-11</dd></dl>
The 'isolated noise removal' algorithm tries to eliminate isolated noisy pixels from an clip. The isolationCoefficient parameter defines how much isolated should be a noisy pixel to be removed. That means a noisy pixel will be removed whenever it has as much neighbours whose gray level is over a threshold value as isolationCoefficient. 
<p>Definition at line <a class="el" href="_preprocessor_8cpp-source.html#l00129">129</a> of file <a class="el" href="_preprocessor_8cpp-source.html">Preprocessor.cpp</a>.</p>

<p>Referenced by <a class="el" href="_recognizer_8cpp-source.html#l00086">Recognizer::obtainText()</a>.</p>

</div>
</div><p>
<a class="anchor" name="3d4fa7e4721c62997beb93a41d729c99"></a><!-- doxytag: member="Preprocessor::computeSonkaOptimalThreshold" ref="3d4fa7e4721c62997beb93a41d729c99" args="(const Clip &amp;clip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Preprocessor::computeSonkaOptimalThreshold           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_clip.html">Clip</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>clip</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Implementation of optimal threshold computing following the Sonka's technique. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>clip</em>&nbsp;</td><td>The clip where applying the algorithm over</td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_clip.html" title="Press clip where the recognizer has to extract the text from.">Clip</a></dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>The attribute <a class="el" href="class_preprocessor.html#865b1e28dd9535b96f70727a550104fe" title="Optimal threshold value within the clip.">optimalThreshold_</a> is initialized to the threshold found</dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-14</dd></dl>
The strategy proposed by M. Sonka, V. Hlavac and R. Boyle in "Image Processing, Analysis and Machine Vision" (Thomson Learning, 2008) is to find a mean value between the mean value of background's gray level and the mean value of objects' gray level, starting from an initial threshold value that is given by the member <a class="el" href="class_preprocessor.html#2c9e44ff6522b2ce35d6bc6161ad2680" title="Background reference gray level.">backgroundReferenceGrayLevel_</a>. 
<p>Definition at line <a class="el" href="_preprocessor_8cpp-source.html#l00199">199</a> of file <a class="el" href="_preprocessor_8cpp-source.html">Preprocessor.cpp</a>.</p>

<p>Referenced by <a class="el" href="_preprocessor_8cpp-source.html#l00033">computeOptimalThreshold()</a>.</p>

</div>
</div><p>
<a class="anchor" name="faa4368f471a3e5d0cb46865a2a1ccb7"></a><!-- doxytag: member="Preprocessor::computeOtsuOptimalThreshold" ref="faa4368f471a3e5d0cb46865a2a1ccb7" args="(const Clip &amp;clip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Preprocessor::computeOtsuOptimalThreshold           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_clip.html">Clip</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>clip</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Implementation of optimal threshold computing following the Otsu's technique. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>clip</em>&nbsp;</td><td>The clip where applying the algorithm over</td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_clip.html" title="Press clip where the recognizer has to extract the text from.">Clip</a></dd></dl>
<dl class="post" compact><dt><b>Postcondition:</b></dt><dd>The attribute <a class="el" href="class_preprocessor.html#865b1e28dd9535b96f70727a550104fe" title="Optimal threshold value within the clip.">optimalThreshold_</a> is initialized to the threshold found</dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Eliezer Talón (<a href="mailto:elitalon@gmail.com">elitalon@gmail.com</a>) </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2008-10-14</dd></dl>
The strategy proposed by N. Otsu in "A Threshold Selection Method from Gray-Level Histograms" (IEEE Transactions on Systems, Man, and Cybernetics, 1979) maximises the likelihood that the threshold is chosen so as to split the image between and object and its background. An optimal threshold is selected by the discriminant criterion, namely, so as to maximize the separability of the resultant classes in gray levels. The procedure is very simple, utilizing only the zeroth- and the first-order cumulative moments of the gray-level histogram. 
<p>
1. Compute the gray-level histogram and normalized it.<p>
2. Compute the total mean level of the image <img class="formulaInl" alt="$\mu_T$" src="form_0.png">.<p>
3. For each gray level <img class="formulaInl" alt="$k$" src="form_1.png"> compute <img class="formulaInl" alt="$\omega(k)$" src="form_2.png"> y <img class="formulaInl" alt="$\mu(k)$" src="form_3.png">, which are the zeroth- and the first-order cumulative moments of the histogram up to the <img class="formulaInl" alt="$k$" src="form_1.png">th level.<p>
4. Compute the variance of the class separability <img class="formulaInl" alt="$\sigma_B^2(k)$" src="form_4.png">.<p>
5. Find the <img class="formulaInl" alt="$k$" src="form_1.png">th level that makes a <img class="formulaInl" alt="$\sigma_B^2(k)$" src="form_4.png"> value the maximum. 
<p>Definition at line <a class="el" href="_preprocessor_8cpp-source.html#l00256">256</a> of file <a class="el" href="_preprocessor_8cpp-source.html">Preprocessor.cpp</a>.</p>

<p>Referenced by <a class="el" href="_preprocessor_8cpp-source.html#l00033">computeOptimalThreshold()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_preprocessor_8hpp-source.html">Preprocessor.hpp (148)</a><li><a class="el" href="_preprocessor_8cpp-source.html">Preprocessor.cpp (149)</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Oct 17 17:03:49 2008 for Nessie, reconocedor óptico de texto en recortes de prensa escrita by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
